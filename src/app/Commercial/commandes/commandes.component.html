<div class="page-content" id="content">

    <div style="text-align: center;">
      <h1>Liste des commandes</h1>
    </div>

    <table class="table">
        <thead class="thead-light">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Nom du client</th>
            
            <th scope="col">Détails</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of orders; index as i">
            <th scope="row">{{i+1}}</th>
            <td>{{order.nomClient}}</td>
            
            
            <td>
              <button type="button" class="btn btn-primary mr-1" (click)="openModal2(template2,order)">Details</button>
            </td>
            <td>
              <!-- <button type="button" class="btn btn-info mr-1" (click)="openModal(template, order)">Modifier</button> -->
              <button type="button" class="btn btn-info mr-1" (click)="openModal(template,order)">Facturer</button>
              <!-- <button type="button" class="btn btn-danger" (click)="delete(order)">Supprimer</button> -->
            </td>

            <ng-template #template>
              <div class="modal-header">
                <h4 class="modal-title pull-left">TVA et Reduction</h4>
                <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
                  <span aria-hidden="true" class="visually-hidden">&times;</span>
                </button>
              </div>
              <div class="modal-body">                
                  <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <div class="input-group-text">
                        <input type="checkbox" aria-label="Checkbox for following text input" (click)="checked(order)" [formControl]="checkbox">
                      </div>
                      <span class="input-group-text" id="basic-addon3">Inclure la TVA</span>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="Input1">Pourcentage de la réduction</label>
                    <input type="number" class="form-control" placeholder="Pourcentage de la réduction" [formControl]="reduction">
                  </div>
                <button type="button" class="btn btn-primary mb-2" (click)="saveOrder(order)" >Valider</button>
              </div>
            </ng-template>

            <ng-template #template2>
              <div class="card card-default">
                <div class="card-header">
                    <h3 class="card-title">Details de la commande</h3>
                </div>
                <div class="card-body">
                  <table class="table table-head-fixed text-nowrap">
                    <thead>
                      <tr>
                        <th>Nom</th>
                        <th>Quantité</th>
                        <th>Prix</th>
                        
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let cd of order.appends?.commandesDetail">
                  
                        <td>{{cd.productName}}</td>
                        <td>{{cd.quantity}}</td>
                        <td>{{cd.prix}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </ng-template>

          </tr>
        </tbody>
    </table>
</div>